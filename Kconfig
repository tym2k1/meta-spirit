# Submenu for selecting MACHINE
menu "Select MACHINE"

choice
    prompt "Choose your target machine"
    default KCONF_MACHINE_CM5
    help
      Pick the machine hardware configuration for the build.

config KCONF_MACHINE_CM5
    bool "spirit-phone-cm5"
    help
      Build for the Spirit Phone CM5 device.

config KCONF_MACHINE_QEMU
    bool "qemuarm64"
    help
      Build for the QEMU ARM64 emulator.

endchoice
endmenu  # end MACHINE submenu

# Submenu for selecting DISTRO
menu "Select DISTRO"

choice
    prompt "Choose your target distro"
    default KCONF_DISTRO_SPIRIT
    help
      Select the Yocto distribution configuration to use.

config KCONF_DISTRO_SPIRIT
    bool "spirit-os"
    help
      Standard Spirit OS distribution.

endchoice
endmenu  # end DISTRO submenu

menu "Features"

config KCONF_FEATURE_DEV_MODE
    bool "Enable Development Features (serial, empty root password)"
    help
      Enable debug/development options in the build:
        - Serial console
        - Empty root password
      Leave disabled for production images.

endmenu  # end Features submenu

menu "Settings Overview"

config KAS_INCLUDE_COMMON
    string "Always include this kas file"
    default "/repo/kas.yml"
    help
      This file is automatically included in the kas build.
      It contains essential base configuration.
      Don't change unless you know what you're doing.

config MACHINE
    string "Selected MACHINE"
    default "spirit-phone-cm5" if KCONF_MACHINE_CM5
    default "qemuarm64" if KCONF_MACHINE_QEMU
	help
	  The end MACHINE value.

config DISTRO
    string "Selected DISTRO"
    default "spirit-os" if KCONF_DISTRO_SPIRIT
	help
	  The end DISTRO value.

config SPIRIT_DEV_MODE
    string "Development Mode flag"
    default "1" if KCONF_FEATURE_DEV_MODE
    default "0"
    help
      This variable will be passed to the Yocto build to enable or disable
      development features in recipes and configuration.

endmenu
